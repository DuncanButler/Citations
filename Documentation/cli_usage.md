# Copilot Citations CLI Usage Guide

This document provides detailed information on using the Copilot Citations command-line interface (CLI) tool.

## Overview

The Copilot Citations CLI tool allows you to scan your codebase for Copilot-generated citation comments and generate documentation from them in various formats. This is useful for keeping track of code snippets that were generated by GitHub Copilot and maintaining proper attribution.

## Installation

Before using the CLI tool, ensure you have:

1. Python 3.9+ installed
2. The Copilot Citations package installed:

```bash
pip install -r requirements.txt
```

## Basic Usage

The most basic usage of the tool is:

```bash
python -m src.__main__ -d /path/to/code -o /path/to/output/citations.md
```

This will scan `/path/to/code` for citation comments and generate a markdown file at `/path/to/output/citations.md`.

## Command-Line Options

The CLI tool supports the following options:

### Required Arguments

The tool doesn't have any strictly required arguments, as all have defaults. However, you'll typically want to specify at least:

* `-d, --directory`: Directory to scan for citations (default: current directory)
* `-o, --output`: Output file path (default: `Documentation/citations.md`)

### Optional Arguments

* `-f, --format FORMAT`: Output format (options: markdown, html, json; default: markdown)
* `-e, --extensions EXT [EXT ...]`: File extensions to scan (default: .py .js .ts .java .cs .cpp .c)
* `-r, --recursive`: Scan directories recursively (default: enabled)
* `--no-recursive`: Disable recursive directory scanning
* `--ignore PATTERNS`: Comma-separated patterns to ignore (default: node_modules,.git,__pycache__,dist,build)
* `--count-only`: Only count citations without generating output files
* `-v, --verbose`: Enable verbose output
* `--version`: Show version information
* `-h, --help`: Show help message

## Examples

### Scan a specific directory

```bash
python -m src.__main__ -d ./src
```

### Generate HTML documentation

```bash
python -m src.__main__ -d ./src -o documentation/citations.html -f html
```

### Generate JSON documentation

```bash
python -m src.__main__ -d ./src -o documentation/citations.json -f json
```

### Scan only JavaScript and TypeScript files

```bash
python -m src.__main__ -d ./src -e .js .ts
```

### Disable recursive scanning

```bash
python -m src.__main__ -d ./src --no-recursive
```

### Custom ignore patterns

```bash
python -m src.__main__ -d ./src --ignore "node_modules,vendor,tests"
```

### Count-only mode

```bash
python -m src.__main__ -d ./src --count-only
```

### Verbose output

```bash
python -m src.__main__ -d ./src -v
```

## Citation Format

The tool recognizes citation comments in the following format:

```python
# [CITATION] Source: https://example.com/resource
# [CITATION] Author: Example Author
# [CITATION] Date: 2025-06-06
# [CITATION] Description: Brief explanation of what was referenced
```

Different comment styles are supported for various languages:

* `#` for Python, Shell, Ruby, etc.
* `//` for JavaScript, TypeScript, C++, Java, C#, Go, etc.
* `/* */` for C, C++, Java, JavaScript, CSS, etc.
* `<!-- -->` for HTML, XML, etc.
* `--` for SQL, Haskell, etc.

## Output Formats

### Markdown Format

The Markdown output organizes citations by file and includes all available metadata:

```markdown
# Copilot Citations

## src/example.py

### Citation 1
* **Source**: https://example.com/resource
* **Author**: Example Author
* **Date**: 2025-06-06
* **Description**: Brief explanation of what was referenced
```

### HTML Format

The HTML output provides a styled, readable document that can be viewed in any browser.

### JSON Format

The JSON output provides a structured representation of all citations, useful for further processing:

```json
{
  "src/example.py": [
    {
      "source": "https://example.com/resource",
      "author": "Example Author",
      "date": "2025-06-06",
      "description": "Brief explanation of what was referenced"
    }
  ]
}
```

## Troubleshooting

### Common Issues

1. **No citations found**: Check that you're using the correct citation format in your comments.
2. **File not found errors**: Verify the paths you're providing to the `-d` and `-o` options.
3. **Permission errors**: Ensure you have read access to the directory you're scanning and write access to the output location.

### Getting Help

If you encounter issues not covered here, please:

1. Run the tool with the `-v` flag to get verbose output
2. Check the error message for specific information
3. File an issue in the GitHub repository with the error details and steps to reproduce

## Integration with Other Tools

### Git Hooks

You can integrate Copilot Citations with Git hooks to automatically generate updated documentation before commits. See the Git hooks integration documentation for more details.

### VS Code Extension

A Visual Studio Code extension is available to integrate Copilot Citations directly into your IDE. See the VS Code extension documentation for installation and usage instructions.
